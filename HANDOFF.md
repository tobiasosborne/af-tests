# Handoff: 2026-01-31 (Session 76)

## Completed This Session

**CRITICAL DISCOVERY: The ring structure approach for PeirceSpace e 1 is INVALID.**

### Key Finding

PeirceSpace e 1 is NOT associative for general idempotents!

**Counterexample:** For e = diag(1,1,0) in H₃(ℝ):
- PeirceSpace e 1 ≅ H₂(ℝ) (2×2 symmetric matrices)
- H₂(ℝ) is NOT associative under Jordan product

### H-O 2.5.5 Clarification

The book says "elements that operator-commute with p generate associative subalgebras"
means: for a SINGLE element a, the algebra generated by {a, p} is associative.

This is NOT the same as saying all of {pAp} is associative!

### Issues Closed (WONTFIX)

| Issue | Description |
|-------|-------------|
| af-1tzf | Associativity claim is FALSE |
| af-elpg | CommSemigroup (needs associativity) |
| af-gwqf | CommRing (needs CommSemigroup) |
| af-t68m | IsReduced (ring structure approach) |
| af-nl8m | IsArtinian (ring structure approach) |
| af-5669 | equivPi (ring structure approach) |
| af-2oyk | Minimality → single field (ring specific) |

### New Issue Created

**af-8zmu**: Correct approach using power-associative subalgebra argument.

---

## Current State

| Metric | Value |
|--------|-------|
| Total Sorries in Jordan/ | 26 (removed 1 wrong sorry) |
| Build Status | PASSING |
| Issues Closed This Session | 7 (as WONTFIX) |
| Issues Created | 1 (af-8zmu: correct approach) |

---

## Files Modified This Session

- `AfTests/Jordan/Peirce.lean` — Removed incorrect `peirceOne_mul_assoc` theorem
- `docs/Jordan/LEARNINGS.md` — Added Session 76 critical discovery
- `HANDOFF.md` — This file

---

## Correct Approach for primitive_peirce_one_scalar

For **primitive** idempotent p (H-O 2.9.4(ii)):

1. For any a ∈ {pAp}, the algebra generated by {a, p} is associative (H-O 2.5.5)
2. This algebra is: commutative, without nilpotents, finite-dimensional
3. Apply H-O 2.9.3: decomposes as direct sum of fields
4. Minimality of p → single field factor (n = 1)
5. Formally real → field = ℝ (not ℂ)
6. Hence a ∈ ℝ·p, so {pAp} = ℝ·p

**Key insight:** We do NOT need the entire {pAp} to be associative. We only need
that for any single element a, the algebra generated by {a, p} is associative.

---

## Next Session Recommendations

1. **Work on af-8zmu** - Implement the correct power-associative subalgebra approach
   - May need to formalize H-O 2.9.3 (ring decomposition theorem)
   - Use mathlib's `IsArtinianRing.equivPi` or similar

2. **af-niay** (no nilpotents) and **af-agxd** (fields are ℝ or ℂ) remain valid and useful

3. **Alternative:** Consider dimensional argument for primitive idempotents
   - If p is primitive and dim(PeirceSpace p 1) > 1
   - Take x linearly independent from p
   - The algebra generated by {x, p} is a field over ℝ
   - Finite-dim formally real field = ℝ
   - So x ∈ ℝ·p, contradiction
   - Hence dim = 1, so {pAp} = ℝ·p

---

## Issue Chain Status (Updated)

```
STILL VALID:
├── af-niay: No nilpotents in formally real (H-O 2.9.4(i))
├── af-n2e3: FiniteDimensional instance
├── af-agxd: Fields over R are R or C (H-O 2.2.6)
├── af-pdie: Formally real field is R
└── af-8zmu: NEW - Correct approach using power-associative subalgebra

INVALIDATED (closed as WONTFIX):
├── af-1tzf: Associativity (FALSE for general idempotents)
├── af-elpg, af-gwqf: Ring instances
├── af-t68m, af-nl8m, af-5669: Ring structure chain
└── af-2oyk: Ring decomposition specific

GOALS (approach changed):
├── af-sgff: primitive_peirce_one_scalar (now depends on af-8zmu)
├── af-lhxr: orthogonal_primitive_peirce_sq
├── af-hbnj: exists_primitive_decomp
└── af-4g40: spectral sorry elimination
```

---

## Lesson Learned

**Always verify mathematical claims against concrete examples before building infrastructure.**

The Session 74/75 approach assumed PeirceSpace e 1 is associative based on a
misreading of H-O 2.5.5. A simple counterexample (H₂(ℝ)) shows this is false.
