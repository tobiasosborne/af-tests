# Handoff: 2026-01-31 (Session 80)

## Completed This Session

### H-O 2.5.5 Power Associativity Corollary (af-vv7z)

Added `jpow_assoc` to `LinearizedJordan.lean`:

```lean
theorem jpow_assoc (a : J) (m n p : ℕ) :
    jmul (jmul (jpow a m) (jpow a n)) (jpow a p) =
    jmul (jpow a m) (jmul (jpow a n) (jpow a p))
```

This proves that the subalgebra generated by a single element is associative,
which is the key result from H-O 2.5.5.

### Restructured primitive_peirce_one_scalar Proof (af-8zmu, af-sgff)

Refactored `Primitive.lean` with new helper lemmas:

| Theorem | Lines | Status |
|---------|-------|--------|
| `primitive_idempotent_in_P1` | 149-157 | **PROVEN** |
| `primitive_peirce_one_dim_one` | 165-176 | sorry (key target) |
| `primitive_peirce_one_scalar` | 182-205 | **PROVEN** (depends on dim_one) |

The proof of `primitive_peirce_one_scalar` now:
1. Assumes `primitive_peirce_one_dim_one` (dim P₁(e) = 1)
2. Shows P₁(e) = span{e} using `finrank_span_singleton`
3. Concludes x ∈ ℝ·e

### Issues Closed

- **af-vv7z**: H-O 2.5.5 - `jpow_assoc` added
- **af-8zmu**: `primitive_peirce_one_scalar` restructured
- **af-sgff**: `primitive_peirce_one_scalar` now conditional on `primitive_peirce_one_dim_one`

### Issue Created

- **af-fbx8**: Prove `primitive_peirce_one_dim_one` (P1)

---

## Current State

| Metric | Value |
|--------|-------|
| Total Sorries in Jordan/ | **26** |
| Build Status | PASSING |
| New theorems added | 2 (jpow_assoc, primitive_idempotent_in_P1) |

---

## Key Sorry: primitive_peirce_one_dim_one

**Location:** `Primitive.lean:165`

**Goal:** Prove `Module.finrank ℝ (PeirceSpace e 1) = 1` for primitive e.

**Proof strategy:**
1. For any x ∈ P₁(e), consider ℝ[x] = Span{e, x, x², ...}
2. This is associative (by `jpow_assoc`), commutative, no nilpotents, finite-dim
3. By Artinian structure theorem → product of fields
4. By formal reality → each field is ℝ
5. By primitivity → only one field (else non-trivial idempotents)
6. Hence ℝ[x] = ℝ, so dim P₁(e) = 1

**Challenge:** Constructing ℝ[x] as a CommRing instance (~50-100 LOC).

---

## Next Session Recommendations

### Option A: Fill primitive_peirce_one_dim_one (af-fbx8, ~50-100 LOC)

This is the key blocker for:
- `orthogonal_primitive_peirce_sq` (H-O 2.9.4(iv))
- `exists_primitive_decomp`
- Spectral theory completion

Requires constructing ring structure on polynomial subalgebra.

### Option B: No nilpotents in formally real (af-niay, ~30-50 LOC)

H-O 2.9.4(i): Prove that formally real Jordan algebras have no nilpotent elements.
This is a simpler target that may help with other proofs.

---

## Files Modified This Session

- `AfTests/Jordan/LinearizedJordan.lean` — Added `jpow_assoc` (~15 LOC)
- `AfTests/Jordan/Primitive.lean` — Restructured proofs, added `primitive_idempotent_in_P1`, `primitive_peirce_one_dim_one` (~40 LOC change)
- `HANDOFF.md` — This file

---

## Key Learnings

1. **jpow_assoc from jpow_add:** The associativity of single-element algebras follows
   directly from power associativity by arithmetic on natural numbers.

2. **finrank_span_singleton:** For 1-dimensional spaces, if you know dim = 1 and have
   a nonzero element, you can show the space equals the span of that element.

3. **Proof restructuring:** Breaking `primitive_peirce_one_scalar` into
   `primitive_peirce_one_dim_one` + span argument makes the logic clearer.
