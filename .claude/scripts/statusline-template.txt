StatusLine Configuration for Context Checkpoint Hook
====================================================

The context checkpoint hook requires the statusLine to write context percentage
to a SESSION-SPECIFIC file. This enables parallel Claude Code sessions.

Add this to your ~/.claude/settings.json:

"statusLine": {
  "type": "command",
  "command": "input=$(cat); user=$(whoami); host=$(hostname -s); dir=$(pwd); sid=$(echo \"$input\" | jq -r '.session_id // empty'); usage=$(echo \"$input\" | jq '.context_window.current_usage'); if [ \"$usage\" != \"null\" ]; then current=$(echo \"$usage\" | jq '.input_tokens + .cache_creation_input_tokens + .cache_read_input_tokens'); size=$(echo \"$input\" | jq '.context_window.context_window_size'); pct=$((current * 100 / size)); [ -n \"$sid\" ] && echo \"$pct\" > \"/tmp/claude-context-pct-${sid}\"; filled=$((pct / 5)); empty=$((20 - filled)); bar=''; i=0; while [ $i -lt $filled ]; do bar=\"${bar}█\"; i=$((i + 1)); done; i=0; while [ $i -lt $empty ]; do bar=\"${bar}░\"; i=$((i + 1)); done; printf '\\033[01;32m%s@%s\\033[00m:\\033[01;34m%s\\033[00m \\033[2m[\\033[00m%s \\033[01;33m%d%%\\033[00m\\033[2m]\\033[00m' \"$user\" \"$host\" \"$dir\" \"$bar\" \"$pct\"; else printf '\\033[01;32m%s@%s\\033[00m:\\033[01;34m%s\\033[00m' \"$user\" \"$host\" \"$dir\"; fi"
}

What this does:
- Shows: user@host:dir [████████████░░░░░░░░ 60%]
- Writes percentage to /tmp/claude-context-pct-{session_id}
- Supports parallel sessions (each writes to its own file)

Architecture:
1. statusLine extracts session_id from input JSON
2. statusLine writes context % to /tmp/claude-context-pct-{session_id}
3. PostToolUse hook reads session_id from ITS input (PostToolUse provides it!)
4. PostToolUse hook reads context % from the session-specific file
5. This way parallel sessions don't interfere with each other

Why this is needed:
- PostToolUse hooks do NOT receive context_window data
- Only statusLine receives the full context_window object
- So statusLine writes pct to file, PostToolUse hook reads from file
- Session-specific files prevent parallel session conflicts
